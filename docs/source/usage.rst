Usage
=====
Here you can find detailed instructions on how to create and maintain an ODKSM server instance.

First of all make sure the tool is correctly :doc:`installed <installation>`.

Create a server instance
^^^^^^^^^^^^^^^^^^^^^^^^
Begin by filling in the config file ``config.ini`` that can be found in the root directory of the tool.

.. note:: It's recommend to never modify files directly in the tool directory: it will be easier to update the tool.

    Prepare a custom instance folder and copy the ``config.ini`` and ``ODKSM.bat`` files there; after that, edit
    ``ODKSM.bat`` and set the variable ``ODKSM_FOLDER_PATH`` to the tool root folder.

The default_ ``config.ini`` is thoroughly documented and all supported fields descriptions can also be found in the
:doc:`config.ini documentation <config>`.

Fields in the ``config`` and ``bat`` sections will be used respectively to fill in templates for the ``serverConfig.cfg`` (the file
that will be passed with the -config flag to the server) and ``run_server.bat`` (the bat that will be used to launch
the instance).

Fields from the ``ODKSM`` section will be used directly by the tool to set paths, mods and keys, amongst other things.

.. note:: User mods can be specified as a list in the config with the :option:`user_mods_list <ODKSM user_mods_list>`
    field or by passing the path of a mods preset file created by the Arma 3 Launcher in the
    :option:`user_mods_preset <ODKSM user_mods_preset>` field.

    Server side mods can be specified only as a list with the :option:`server_mods_list <ODKSM server_mods_list>` field.

After editing the config file, simply drag&drop it on the ``ODKSM.bat`` to launch the tool.

Alternatively, in the shell:

.. code:: console

    $ ODKSM.bat your_config.ini

To launch the instance, once its folder has been created run inside it:

.. code:: console

    $ run_server.bat

.. _default: https://github.com/CarloDePieri/odk_servermanager/blob/master/config.ini

Manage a server instance
^^^^^^^^^^^^^^^^^^^^^^^^
An *update* of a server instance is needed if a change in mission, mods or just a field somewhere is desired. To do so,
edit your ``config.ini`` and relaunch ``ODKSM.bat`` via drag&drop or the console.

This will re-link / re-copy mods, reset the keys folder and re-compile config files.

.. note:: When updating mods in the Arma 3 ``!Workshop`` folder the keys files will probably change. Sadly there's
    no way to magically link them in the instance, since the name of these very files changes. This means that after
    updating the mods via Steam, an update to the server instance will be needed in order to re-link keys files.

.. important:: Remember that when editing **symlinked files** inside a generated instance folder, files **inside the
    main Arma folder** are really being changed!

.. important:: Keep in mind that every **real file** inside the generated instance folder is **re-compiled on update**.
    This means that any edits, for example to a generated ServerConfig.cfg, will be lost on update. For changes that
    persist between updates use the main ``config.ini`` file or :doc:`config templates <templates>`.

Delete a server instance
^^^^^^^^^^^^^^^^^^^^^^^^
Everything inside a generated server instance folder are either symlinked or generated by the tool, so the whole folder
can be safely deleted if not needed anymore or to start over with a new configuration.

More customization
^^^^^^^^^^^^^^^^^^
This is everything needed to run a server instance! More information about automating some repeating tasks, like setting
up several server instances or performing specific action with specific mods, can be found in the
:doc:`Advanced Usage section <quick_start>`.

